(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"8c1N":function(e,n){e.exports=function(e){if(navigator.clipboard)return navigator.clipboard.writeText(e).catch((function(e){throw void 0!==e?e:new DOMException("The request is not allowed","NotAllowedError")}));var n=document.createElement("span");n.textContent=e,n.style.whiteSpace="pre",document.body.appendChild(n);var t=window.getSelection(),r=window.document.createRange();t.removeAllRanges(),r.selectNode(n),t.addRange(r);var a=!1;try{a=window.document.execCommand("copy")}catch(o){console.log("error",o)}return t.removeAllRanges(),window.document.body.removeChild(n),a?Promise.resolve():Promise.reject(new DOMException("The request is not allowed","NotAllowedError"))}},GjZl:function(e,n,t){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});var a=r(t("8c1N")),o=t("q1tI"),l=t("nd+E");function i(e){return e&&("TEXTAREA"===e.nodeName||"INPUT"===e.nodeName)}n.useClipboard=function(e){void 0===e&&(e={});var n=l.useTimedToggle(!1),t=n[0],r=n[1],s=o.useRef(null);function c(e){a.default(e).then(u).catch(d)}function u(){e.onSuccess&&e.onSuccess(),e.copiedTimeout&&r(e.copiedTimeout),e.selectOnCopy&&i(s.current)&&s.current.select()}function d(){e.onError&&e.onError(),!1!==e.selectOnError&&i(s.current)&&s.current.select()}return{copied:t,copy:o.useCallback((function(e){"string"===typeof e?c(e):s.current&&c(s.current.value)}),[]),isSupported:function(){return!!(navigator.clipboard||document.execCommand&&document.queryCommandSupported&&document.queryCommandSupported("copy"))},target:s}}},Qetd:function(e,n,t){"use strict";var r=Object.assign.bind(Object);e.exports=r,e.exports.default=e.exports},RNiq:function(e,n,t){"use strict";t.r(n);var r=t("q1tI"),a=t.n(r),o=t("LvDl"),l=t.n(o);const i=(e,n=1)=>{let t=e*(255/16);return`rgba(${t}, ${t}, ${t}, ${n})`},s=(e,n,t)=>fetch("http://api.bely.me/"+n,{method:e,headers:{"Content-Type":"application/json","GB-Access-Token":"b93d45ba6c5dd123c3d5f31a08d9e57e"},...l.a.isUndefined(t)?{}:{body:JSON.stringify(t)}});var c={all:()=>s("GET","links").then(e=>e.json()),one:e=>s("GET",`links/${e}`).then(e=>e.json())},u=e=>s("DELETE",`links/${e}`),d=async({url:e,slug:n})=>{let t=await s("POST","links",{url:e,slug:n}).then(e=>e.json()),r=[[{slug:["has already been taken"],url:["has already been taken"]},"TAKEN_SLUG_URL"],[{url:["can't be blank"]},"BLANK_URL"],[{url:["has already been taken"]},"TAKEN_URL"],[{slug:["has already been taken"]},"TAKEN_SLUG"]];return"errors"in t?{respType:l()(r).find(([e,n])=>l.a.isMatch(t.errors,e))[1]}:{respType:"SUCCESS"}},p="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),m=new Uint8Array(16);function f(){if(!p)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return p(m)}for(var g=[],b=0;b<256;++b)g.push((b+256).toString(16).substr(1));var E=function(e,n){var t=n||0;return(g[e[t+0]]+g[e[t+1]]+g[e[t+2]]+g[e[t+3]]+"-"+g[e[t+4]]+g[e[t+5]]+"-"+g[e[t+6]]+g[e[t+7]]+"-"+g[e[t+8]]+g[e[t+9]]+"-"+g[e[t+10]]+g[e[t+11]]+g[e[t+12]]+g[e[t+13]]+g[e[t+14]]+g[e[t+15]]).toLowerCase()};var h=function(e,n,t){var r=(e=e||{}).random||(e.rng||f)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,n){t=t||0;for(var a=0;a<16;++a)n[t+a]=r[a];return n}return E(r)};const y=({url:e,slug:n})=>""===n?(async({url:e})=>{for(var n=20;n>0;){let t=await d({url:e,slug:h().substring(0,3)});if("SUCCESS"===t.respType)return t;n-=1}throw`wow. sorry this shortener got too popular. might i interest you in a qr code instead? https://duckduckgo.com/?q=qr+${e}`})({url:e}):d({url:e,slug:n}),v=({exposition:e,onSubmit:n,slugHook:t,urlHook:r})=>a.a.createElement("div",null,a.a.createElement("form",{onSubmit:e=>(e.preventDefault(),n())},e,a.a.createElement("span",null,"please shorten "),a.a.createElement("input",{className:"urlField textField",placeholder:"url",value:r[0],onChange:e=>r[1](e.target.value)}),a.a.createElement("span",null," to "),a.a.createElement("div",{className:"slugField"},a.a.createElement("input",{className:"textField",placeholder:"slug",value:t[0],onChange:e=>t[1](e.target.value)}),a.a.createElement("div",{className:"blankInfo"},a.a.createElement("span",null,"(leave blank for random) "))),a.a.createElement("input",{className:"submitButton",type:"submit",value:"now","aria-label":"now submit"}),a.a.createElement("span",null,".")),a.a.createElement("style",{jsx:"jsx"},`\n        .urlField {\n          width: 300px;\n          color: ${i(128)};\n        }\n        .slugField {\n          margin: 0px 18px 0px 0px;\n          width: 130px;\n          display: inline-block;\n        }\n        .slugField .textField {\n          width: 100%;\n        }\n        .blankInfo {\n          color: ${i(100)};\n          font-size: 10px;\n          position: absolute;\n        }\n        .textField {\n          color: ${i(13)};\n          background-color: transparent;\n          font-size: 14px;\n          border-top: 0px;\n          border-left: 0px;\n          border-right: 0px;\n          border-bottom: 2px dotted ${i(128)};\n        }\n        .submitButton {\n          background-color: transparent;\n          color: ${i(15)};\n          padding: 10px;\n          cursor: pointer;\n        }\n        .submitButton:hover {\n          background-color: ${i(10)};\n        }\n      `));var w=({triggerRefresh:e})=>{const[n,t]=Object(r.useState)("NOERROR"),[o,l]=Object(r.useState)(!1),s=Object(r.useState)(""),c=Object(r.useState)(""),u={NOERROR:a.a.createElement("span",null),BLANK_URL:a.a.createElement("span",null,"now knowing that i cannot leave the url field blank, "),TAKEN_URL:a.a.createElement("span",null,"now knowing that the url ",a.a.createElement("span",{className:"offensive"},s[0]),"is already in the system, "),TAKEN_SLUG:a.a.createElement("span",null,"now knowing that the slug ",a.a.createElement("span",{className:"offensive"},c[0])," is already in the system, "),TAKEN_SLUG_URL:a.a.createElement("span",null,"now knowing that both the slug ",a.a.createElement("span",{className:"offensive"},c[0])," and the url",a.a.createElement("span",{className:"offensive"},s[0]),"are already in the system, ")};return a.a.createElement("div",null,!o&&a.a.createElement(v,{exposition:u[n],onSubmit:async()=>{l(!0);let n=await y({url:s[0],slug:c[0]});l(!1),t(n.respType),"SUCCESS"===n.respType&&(s[1](""),c[1](""),e())},urlHook:s,slugHook:c}),o&&a.a.createElement("p",null,a.a.createElement("span",null,"i see that "),a.a.createElement("span",null,s[0]),a.a.createElement("span",null," is being shortened to"),a.a.createElement("span",null,c[0]),a.a.createElement("span",null,"...")),a.a.createElement("style",{jsx:"jsx"},`\n        div {\n          color: ${i(128)};\n          font-size: 20px;\n        }\n      `))},x=t("GjZl");const k=({slug:e,justDeletedTimeout:n})=>{const[t,a]=Object(r.useState)("DORMANT");return{state:t,delete:async()=>{a("DELETING"),await u(e),a("JUSTDELETED"),await(e=>new Promise(n=>setTimeout(n,e)))(n),a("DELETED")}}};var T=({slug:e,short_url:n,url:t,triggerRefresh:o})=>{const[l,s]=Object(r.useState)(!1),c=Object(x.useClipboard)({copiedTimeout:500}),u=k({slug:e,justDeletedTimeout:600});return a.a.createElement("div",{className:"link "+(l?"highlighted":""),onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1)},a.a.createElement("div",{className:"topLeftOverlay "+(l?"":"hidden")},a.a.createElement("button",{className:"deleteButton clickable","aria-label":"delete",onClick:e=>(e.stopPropagation(),u.delete().then(o))},"x"),a.a.createElement("div",{className:"status"},a.a.createElement("span",null,(({deletion:e,clipboard:n})=>n.copied?"copied":"DELETING"===e.state?"deleting":"JUSTDELETED"===e.state?"deleted":"click to copy")({deletion:u,clipboard:c})+" "),a.a.createElement("a",{className:"short_url clickable",href:n,target:"_blank"},a.a.createElement("span",null,n)))),a.a.createElement("div",{className:"nonControls newPositionOrigin"},a.a.createElement("div",{className:"linkOverlay"},a.a.createElement("p",{className:"long_url"},a.a.createElement("a",{className:"clickable",href:t,target:"_blank"},c.copied?"copied "+n:t))),a.a.createElement("div",{className:"slug",onClick:()=>c.copy(n)},a.a.createElement("h2",null,c.copied?"copied":e))),a.a.createElement("style",{jsx:!0},`\n          .clickable {\n            cursor: pointer;\n          }\n\n          .link {\n            margin: 0px 64px 0px 0px;\n            display: inline-block;\n          }\n\n          .highlighted {\n            background-color: ${i(8)};\n          }\n\n          .status {\n            margin: 0px 0px 0px 8px;\n            display: inline-block;\n            color: ${i(15)};\n            font-size: 8px;\n          }\n\n          .deleteButton {\n            color: red;\n            background-color: transparent;\n          }\n          .deleteButton:hover {\n            background-color: ${i(15)};\n          }\n\n          .linkOverlay {\n            position: absolute;\n            top: 30%;\n            width: 100%;\n            height: 0px;\n            text-align: center;\n          }\n\n          .slug {\n            color: ${i(10)};\n            font-weight: bold;\n            font-size: 80px;\n            word-break: keep-all;\n            cursor: copy;\n          }\n\n          .long_url {\n            font-size: 18px;\n          }\n\n          a {\n            color: ${i(15)};\n            text-decoration: none;\n          }\n\n          h2 {\n            margin: 0px;\n            padding: 0px;\n          }\n        `))};function N(){return(N=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}n.default=e=>{const[n,t]=Object(r.useState)([]),o=()=>c.all().then(t);return Object(r.useEffect)(()=>{o()},[]),a.a.createElement("div",{id:"main"},a.a.createElement("div",{id:"links"},n.map(e=>a.a.createElement(T,N({key:e.slug},e,{triggerRefresh:o})))),a.a.createElement(w,{triggerRefresh:o}),a.a.createElement("style",{jsx:"jsx"},"\n          #main {\n            margin-left: 16px;\n          }\n          #links {\n            margin: 24px 0px 16px 0px;\n          }\n        "),a.a.createElement("style",{jsx:"jsx",global:"global"},`\n          * {\n            font-family: Courier New;\n          }\n          body {\n            margin: 0px;\n            background-color: ${i(1)};\n          }\n          .offensive {\n            color: rgb(255, 40, 40);\n          }\n          .newPositionOrigin {\n            position: relative;\n            top: 0px;\n            left: 0px;\n          }\n\n          .hidden {\n            visibility: hidden;\n          }\n        `))}},YuTi:function(e,n){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},"nd+E":function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("q1tI");n.useTimedToggle=function(e){var n=r.useState(!1),t=n[0],a=n[1],o=r.useRef(),l=r.useRef(e);return r.useEffect((function(){return function(){return clearTimeout(o.current)}}),[]),[t,function(e){clearTimeout(o.current),a(!l.current),o.current=window.setTimeout((function(){return a(l.current)}),e)}]}},vlRD:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t("RNiq")}])},yLpj:function(e,n){var t;t=function(){return this}();try{t=t||new Function("return this")()}catch(r){"object"===typeof window&&(t=window)}e.exports=t}},[["vlRD",0,1,3]]]);